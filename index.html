<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>J.A.R.V.I.S | Neural Interface</title>

<style>
/* ================= GLOBAL ================= */
*{
  margin:0;padding:0;box-sizing:border-box;
  font-family:"Orbitron",Arial,sans-serif;
}
body{
  background:radial-gradient(circle at center,#020b14,#000);
  overflow:hidden;
  color:#00f6ff;
}

/* ================= BOOT SCREEN ================= */
#boot{
  position:fixed;
  inset:0;
  background:black;
  z-index:999;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  animation:fadeOut 1.5s ease forwards;
  animation-delay:6.5s;
}
#boot h1{
  font-size:32px;
  letter-spacing:6px;
  margin-bottom:20px;
  animation:flicker 2s infinite;
}
#boot p{
  font-size:14px;
  opacity:.8;
  margin:4px 0;
}

#progress{
  width:320px;
  height:6px;
  border:1px solid #00f6ff;
  margin-top:20px;
}
#bar{
  height:100%;
  width:0%;
  background:#00f6ff;
  animation:load 6s linear forwards;
}

@keyframes load{to{width:100%;}}
@keyframes flicker{
  0%,100%{opacity:1;}
  50%{opacity:.5;}
}
@keyframes fadeOut{
  to{opacity:0;visibility:hidden;}
}

/* ================= NAME INTRO ================= */
#nameIntro{
  position:fixed;
  inset:0;
  display:flex;
  justify-content:center;
  align-items:center;
  z-index:50;
  pointer-events:none;
  animation:hideName 1s ease forwards;
  animation-delay:8s;
}
#nameIntro h1{
  font-size:42px;
  letter-spacing:4px;
  text-shadow:0 0 20px #00f6ff;
  animation:glow 2s infinite alternate;
}
@keyframes glow{
  from{text-shadow:0 0 10px #00f6ff;}
  to{text-shadow:0 0 30px #00f6ff;}
}
@keyframes hideName{
  to{opacity:0;}
}

/* ================= CANVAS ================= */
canvas{position:fixed;inset:0;z-index:1;}

/* ================= GRID ================= */
.grid{
  position:fixed;inset:0;
  background-image:
    linear-gradient(rgba(0,246,255,.06) 1px,transparent 1px),
    linear-gradient(90deg,rgba(0,246,255,.06) 1px,transparent 1px);
  background-size:40px 40px;
  transform:perspective(700px) rotateX(65deg);
  transform-origin:bottom;
  opacity:.25;z-index:0;
}

/* ================= HUD ================= */
#hud{position:fixed;inset:0;z-index:10;pointer-events:none;}
.panel{
  position:absolute;
  border:1px solid rgba(0,246,255,.45);
  background:rgba(0,10,20,.45);
  backdrop-filter:blur(6px);
  padding:12px;font-size:12px;
}
#leftPanel{top:20px;left:20px;width:260px;}
#rightPanel{top:20px;right:20px;width:260px;}
#bottomPanel{
  bottom:80px;left:50%;
  transform:translateX(-50%);
  width:560px;text-align:center;
}
#creatorPanel{bottom:80px;right:20px;width:260px;}
.panel h2{font-size:14px;margin-bottom:8px;color:#7fffff;}

.bar{margin:6px 0;}
.track{height:6px;border:1px solid #00f6ff;}
.fill{height:100%;background:linear-gradient(90deg,#00f6ff,#8fffff);}

/* ================= CONTROLS ================= */
#controls{
  position:fixed;top:20px;left:50%;
  transform:translateX(-50%);
  z-index:20;pointer-events:auto;
}
#controls button,#controls select{
  background:transparent;border:1px solid #00f6ff;
  color:#00f6ff;padding:10px 16px;
  letter-spacing:2px;margin:0 6px;
}

/* ================= RETICLE ================= */
#reticle{
  position:fixed;width:40px;height:40px;
  border:2px solid #00f6ff;border-radius:50%;
  transform:translate(-50%,-50%);
  box-shadow:0 0 18px #00f6ff;z-index:9;
}

/* ================= RADAR ================= */
#radar{
  position:fixed;right:40px;bottom:160px;
  width:160px;height:160px;border-radius:50%;
  border:2px solid rgba(0,246,255,.5);
  box-shadow:0 0 25px #00f6ff;
  overflow:hidden;z-index:8;
}
#radar::before{
  content:"";position:absolute;inset:0;
  background:conic-gradient(from 0deg,rgba(0,246,255,.6),transparent 65%);
  animation:spin 3s linear infinite;
}
@keyframes spin{to{transform:rotate(360deg);}}

/* ================= DATA STREAM ================= */
#datastream{
  position:fixed;left:20px;bottom:160px;
  width:200px;height:200px;
  font-family:monospace;font-size:10px;
  color:rgba(0,246,255,.6);overflow:hidden;z-index:7;
}

/* ================= FOOTER ================= */
footer{
  position:fixed;bottom:0;left:0;width:100%;
  text-align:center;padding:10px;
  font-size:11px;color:rgba(0,246,255,.6);
  background:rgba(0,10,20,.6);
  border-top:1px solid rgba(0,246,255,.3);
  z-index:20;
}

/* ================= SCANLINES ================= */
#scanlines{
  position:fixed;inset:0;
  background:repeating-linear-gradient(
    to bottom,
    rgba(0,246,255,.03),
    rgba(0,246,255,.03) 1px,
    transparent 2px,
    transparent 4px
  );
  pointer-events:none;z-index:15;
}
</style>
</head>

<body>

<!-- BOOT -->
<div id="boot">
  <h1>J.A.R.V.I.S</h1>
  <p>Neural Interface Initializing</p>
  <p>Loading Subsystems...</p>
  <div id="progress"><div id="bar"></div></div>
</div>

<!-- NAME -->
<div id="nameIntro">
  <h1>Anish Kushwaha</h1>
</div>

<div class="grid"></div>

<div id="controls">
  <button id="startCam">INITIALIZE</button>
  <select id="mode">
    <option value="attract">ATTRACT</option>
    <option value="shockwave">SHOCKWAVE</option>
    <option value="idle">IDLE</option>
  </select>
</div>

<div id="hud">
  <div id="leftPanel" class="panel">
    <h2>SYSTEM STATUS</h2>
    <div class="bar"><div class="track"><div class="fill" id="cpu"></div></div></div>
    <div class="bar"><div class="track"><div class="fill" id="gpu"></div></div></div>
    <div class="bar"><div class="track"><div class="fill" id="signal"></div></div></div>
  </div>

  <div id="rightPanel" class="panel">
    <h2>TRACKING</h2>
    <p>HAND: <span id="handState">OFFLINE</span></p>
    <p>X: <span id="hx">0</span></p>
    <p>Y: <span id="hy">0</span></p>
    <p>MODE: <span id="modeText">ATTRACT</span></p>
  </div>

  <div id="bottomPanel" class="panel">
    <h2>J.A.R.V.I.S</h2>
    <p>Just A Rather Very Intelligent System</p>
  </div>

  <div id="creatorPanel" class="panel">
    <h2>CREATOR</h2>
    <p><b>Anish Kushwaha</b></p>
    <p>Engineer • Student</p>
    <p>AI • Cybersecurity • Creative Coding</p>
  </div>
</div>

<div id="reticle"></div>
<div id="radar"></div>
<div id="datastream"></div>
<div id="scanlines"></div>

<footer>
  All rights reserved (c) 2025 Anish Kushwaha
</footer>

<!-- LIBRARIES -->
<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>

<script>
/* =========================
   AUDIO SYSTEM (WEB AUDIO)
========================= */
const AudioCtx = window.AudioContext || window.webkitAudioContext;
const audioCtx = new AudioCtx();

function beep(freq=800, dur=120, vol=0.05){
  const o = audioCtx.createOscillator();
  const g = audioCtx.createGain();
  o.frequency.value = freq;
  o.type = "sine";
  g.gain.value = vol;
  o.connect(g); g.connect(audioCtx.destination);
  o.start();
  setTimeout(()=>o.stop(), dur);
}

function siren(){
  let t = 0;
  const o = audioCtx.createOscillator();
  const g = audioCtx.createGain();
  o.type = "sawtooth";
  g.gain.value = 0.12;
  o.connect(g); g.connect(audioCtx.destination);
  o.start();
  const i = setInterval(()=>{
    o.frequency.value = 400 + Math.sin(t)*300;
    t += 0.3;
  },30);
  setTimeout(()=>{clearInterval(i); o.stop();},4000);
}

/* =========================
   VOICE
========================= */
function speak(text){
  const u = new SpeechSynthesisUtterance(text);
  u.rate = 0.9;
  u.pitch = 0.85;
  speechSynthesis.speak(u);
}

/* Boot voice */
setTimeout(()=>{
  beep(600,200);
  speak("Welcome Anish Kushwaha. JARVIS online. All systems operational.");
},4500);

/* =========================
   THREE.JS (UNCHANGED BASE)
========================= */
const scene=new THREE.Scene();
const camera=new THREE.PerspectiveCamera(70,innerWidth/innerHeight,.1,1000);
camera.position.z=100;

const renderer=new THREE.WebGLRenderer({antialias:true});
renderer.setSize(innerWidth,innerHeight);
renderer.setPixelRatio(devicePixelRatio);
document.body.appendChild(renderer.domElement);

const COUNT=8000;
const geo=new THREE.BufferGeometry();
const arr=new Float32Array(COUNT*3);
for(let i=0;i<arr.length;i++)arr[i]=(Math.random()-.5)*200;
geo.setAttribute("position",new THREE.BufferAttribute(arr,3));

const mat=new THREE.PointsMaterial({
  color:0x00f6ff,
  size:.6,
  blending:THREE.AdditiveBlending
});
const particles=new THREE.Points(geo,mat);
scene.add(particles);

/* =========================
   HAND TRACKING (SAFE)
========================= */
let hx=0, hy=0;
let handActive=false;

const hands=new Hands({locateFile:f=>`https://cdn.jsdelivr.net/npm/@mediapipe/hands/${f}`});
hands.setOptions({maxNumHands:1,minDetectionConfidence:.7,minTrackingConfidence:.7});

hands.onResults(r=>{
  if(r.multiHandLandmarks.length){
    const p=r.multiHandLandmarks[0][8];
    hx=(p.x-.5)*200;
    hy=-(p.y-.5)*160;
    handActive=true;
    handState.textContent="ONLINE";
    reticle.style.left=p.x*innerWidth+"px";
    reticle.style.top=p.y*innerHeight+"px";
  }
});

startCam.onclick=()=>{
  audioCtx.resume();
  beep(900,150);
  const v=document.createElement("video");
  v.style.display="none";
  document.body.appendChild(v);
  new Camera(v,{onFrame:async()=>await hands.send({image:v}),width:640,height:480}).start();
};

/* =========================
   MODE SYSTEM
========================= */
let currentMode="attract";
mode.onchange=e=>{
  currentMode=e.target.value;
  modeText.textContent=currentMode.toUpperCase();
  beep(1200,120);
  speak(currentMode + " mode activated");
};

/* =========================
   DATA STREAM (ENHANCED)
========================= */
setInterval(()=>{
  const s=Math.random().toString(36).substring(2,12).toUpperCase();
  datastream.innerHTML+=`> ${s}<br>`;
  if(datastream.innerHTML.split("<br>").length>18){
    datastream.innerHTML=datastream.innerHTML.split("<br>").slice(1).join("<br>");
  }
},160);

/* =========================
   AUTONOMOUS SYSTEM VOICE
========================= */
const idleLines=[
  "Monitoring environment",
  "All systems stable",
  "Scanning input signals",
  "Neural interface synchronized",
  "No threats detected"
];

setInterval(()=>{
  if(!handActive){
    speak(idleLines[Math.floor(Math.random()*idleLines.length)]);
  }
  handActive=false;
},30000);

/* =========================
   THREAT DETECTION
========================= */
let tapCount=0;
document.addEventListener("click",()=>{
  tapCount++;
  if(tapCount>18){
    siren();
    speak("Warning. Suspicious activity detected.");
    tapCount=0;
  }
});

/* =========================
   ANIMATION LOOP (UPGRADED)
========================= */
let pulse=0;
function animate(){
  requestAnimationFrame(animate);
  const p=geo.attributes.position.array;

  for(let i=0;i<p.length;i+=3){
    if(currentMode==="attract"){
      p[i]+=(hx-p[i])*.015;
      p[i+1]+=(hy-p[i+1])*.015;
    }
    if(currentMode==="shockwave"){
      const dx=p[i]-hx, dy=p[i+1]-hy;
      const d=Math.sqrt(dx*dx+dy*dy)+.01;
      p[i]+=dx/d*1.6;
      p[i+1]+=dy/d*1.6;
    }
  }

  pulse+=0.03;
  mat.size=0.6+Math.sin(pulse)*0.15;

  geo.attributes.position.needsUpdate=true;
  particles.rotation.y+=.0009;

  cpu.style.width=40+Math.random()*40+"%";
  gpu.style.width=50+Math.random()*30+"%";
  signal.style.width=Math.min(100,Math.abs(hx)+40)+"%";

  renderer.render(scene,camera);
}
animate();

/* =========================
   RESIZE
========================= */
addEventListener("resize",()=>{
  camera.aspect=innerWidth/innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth,innerHeight);
});
   
   
/* ==================================================
   ADVANCED INSTRUMENT CLUSTERS – CLEAN LAYOUT
   (WORKS ON YOUR EXISTING BASE)
================================================== */

/* ---------- HUD ROOT ---------- */
const hudFX = document.createElement("div");
hudFX.style.cssText = `
  position:fixed;
  inset:0;
  z-index:12;
  pointer-events:none;
`;
document.body.appendChild(hudFX);

/* ---------- COLOR MODES ---------- */
const gfxModes = {
  attract: { c:"#00f6ff", glow:18, speed:1 },
  shockwave: { c:"#ff3344", glow:26, speed:2 },
  idle: { c:"#8a8aff", glow:12, speed:0.6 }
};
let activeFX = gfxModes.attract;

/* ---------- UTIL ---------- */
function glow(el, g){
  el.style.boxShadow = `0 0 ${g}px ${activeFX.c}`;
}

/* ==================================================
   TOP LEFT – ENERGY CORES
================================================== */
const energyWrap = document.createElement("div");
energyWrap.style.cssText = `
  position:fixed;
  top:120px;
  left:40px;
  display:flex;
  gap:24px;
`;
hudFX.appendChild(energyWrap);

function makeRing(size){
  const r = document.createElement("div");
  r.style.cssText = `
    width:${size}px;
    height:${size}px;
    border-radius:50%;
    border:2px solid ${activeFX.c};
  `;
  energyWrap.appendChild(r);
  return r;
}
const ringA = makeRing(90);
const ringB = makeRing(60);

let ringAngle = 0;
setInterval(()=>{
  ringAngle = (ringAngle + 3 * activeFX.speed) % 360;
  ringA.style.background =
    `conic-gradient(${activeFX.c} ${ringAngle}deg, transparent 0)`;
  ringB.style.background =
    `conic-gradient(${activeFX.c} ${360-ringAngle}deg, transparent 0)`;
  glow(ringA, activeFX.glow);
  glow(ringB, activeFX.glow-6);
},50);

/* ==================================================
   TOP RIGHT – COMPASS & HEADING
================================================== */
const compassWrap = document.createElement("div");
compassWrap.style.cssText = `
  position:fixed;
  top:120px;
  right:40px;
  text-align:center;
`;
hudFX.appendChild(compassWrap);

const compassRing = document.createElement("div");
compassRing.style.cssText = `
  width:100px;
  height:100px;
  border-radius:50%;
  border:1px dashed ${activeFX.c};
  position:relative;
`;
const needle = document.createElement("div");
needle.style.cssText = `
  position:absolute;
  left:50%;
  bottom:50%;
  width:2px;
  height:40%;
  background:${activeFX.c};
  transform-origin:bottom;
`;
compassRing.appendChild(needle);
compassWrap.appendChild(compassRing);

const heading = document.createElement("div");
heading.style.marginTop = "6px";
heading.style.fontSize = "11px";
compassWrap.appendChild(heading);

let head = 0;
setInterval(()=>{
  head += (Math.random()*8-4);
  needle.style.transform = `rotate(${head}deg)`;
  heading.textContent = `HDG ${Math.abs(head).toFixed(0)}°`;
  glow(compassRing, activeFX.glow);
},800);

/* ==================================================
   MID LEFT – SIGNAL SCOPE
================================================== */
const scope = document.createElement("canvas");
scope.width = 200;
scope.height = 80;
scope.style.cssText = `
  position:fixed;
  left:40px;
  top:280px;
  border:1px solid ${activeFX.c};
`;
hudFX.appendChild(scope);

const sctx = scope.getContext("2d");
let st = 0;
function drawScope(){
  sctx.clearRect(0,0,200,80);
  sctx.strokeStyle = activeFX.c;
  sctx.beginPath();
  for(let x=0;x<200;x++){
    sctx.lineTo(x,40+Math.sin((x+st)*0.06)*18);
  }
  sctx.stroke();
  st += 2 * activeFX.speed;
  requestAnimationFrame(drawScope);
}
drawScope();

/* ==================================================
   CENTER – CORE STATUS
================================================== */
const core = document.createElement("div");
core.style.cssText = `
  position:fixed;
  top:50%;
  left:50%;
  width:120px;
  height:120px;
  transform:translate(-50%,-50%);
  border-radius:50%;
  border:2px solid ${activeFX.c};
`;
hudFX.appendChild(core);

let cp = 0;
setInterval(()=>{
  cp = (cp+4*activeFX.speed)%360;
  core.style.background =
    `conic-gradient(${activeFX.c} ${cp}deg, transparent 0)`;
  glow(core, activeFX.glow+8);
},60);

/* ==================================================
   MID RIGHT – TELEMETRY
================================================== */
const telemetry = document.createElement("div");
telemetry.style.cssText = `
  position:fixed;
  right:40px;
  top:280px;
  font-size:12px;
  line-height:18px;
`;
hudFX.appendChild(telemetry);

setInterval(()=>{
  telemetry.innerHTML = `
    ALT ${(800+Math.random()*400).toFixed(0)} m<br>
    SPD ${(400+Math.random()*200).toFixed(0)} km/h<br>
    TMP ${(20+Math.random()*30).toFixed(1)} °C<br>
    PWR ${(40+Math.random()*60).toFixed(0)} %
  `;
},1000);

/* ==================================================
   BOTTOM LEFT – SYSTEM LOAD
================================================== */
const loadWrap = document.createElement("div");
loadWrap.style.cssText = `
  position:fixed;
  left:40px;
  bottom:100px;
  display:flex;
  gap:6px;
`;
hudFX.appendChild(loadWrap);

for(let i=0;i<5;i++){
  const bar=document.createElement("div");
  bar.style.cssText=`
    width:8px;
    height:40px;
    border:1px solid ${activeFX.c};
  `;
  const fill=document.createElement("div");
  fill.style.background=activeFX.c;
  fill.style.width="100%";
  bar.appendChild(fill);
  loadWrap.appendChild(bar);

  setInterval(()=>{
    fill.style.height = (20+Math.random()*80)+"%";
  },600+i*100);
}

/* ==================================================
   BOTTOM RIGHT – THREAT / MODE
================================================== */
const threat = document.createElement("div");
threat.style.cssText = `
  position:fixed;
  right:40px;
  bottom:100px;
  font-size:13px;
`;
hudFX.appendChild(threat);

setInterval(()=>{
  activeFX = gfxModes[currentMode] || gfxModes.attract;
  threat.innerHTML = `
    MODE: ${currentMode.toUpperCase()}<br>
    STATUS: ${currentMode==="shockwave"?"COMBAT":"NORMAL"}
  `;
},300);

/* ==================================================
   MOBILE SAFETY
================================================== */
if(innerWidth<700){
  energyWrap.style.display="none";
  scope.style.display="none";
  loadWrap.style.display="none";
}
</script>

</body>
</html>
